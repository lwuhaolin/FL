// å¼‚å¸¸æé†’åŠŸèƒ½é¡µé¢
// ã€æ•°æ®è¯·æ±‚ç‚¹ã€‘éœ€è¦å®æ—¶è·å–åœŸå£¤æ¹¿åº¦ã€æ¸©æ¹¿åº¦ç­‰ä¼ æ„Ÿå™¨æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦è¶…å‡ºé˜ˆå€¼
// ã€æ•°æ®å­˜å‚¨ç‚¹ã€‘éœ€è¦å­˜å‚¨æŠ¥è­¦é…ç½®å‚æ•°ï¼ˆé˜ˆå€¼è®¾ç½®ã€é€šçŸ¥æ–¹å¼ç­‰ï¼‰å’Œå†å²æŠ¥è­¦è®°å½•

import notificationManager from '@ohos.notificationManager';
import { BusinessError } from '@ohos.base';

// æŠ¥è­¦ç±»å‹æšä¸¾
enum AlertType {
  SOIL_MOISTURE = 'soil_moisture',
  TEMPERATURE = 'temperature', 
  HUMIDITY = 'humidity',
  LIGHT = 'light'
}

// æŠ¥è­¦çº§åˆ«æšä¸¾
enum AlertLevel {
  WARNING = 'warning',
  CRITICAL = 'critical'
}

// æŠ¥è­¦é…ç½®æ•°æ®æ¥å£
interface AlertConfig {
  id: string;
  type: AlertType;
  name: string;
  minThreshold: number;
  maxThreshold: number;
  enabled: boolean;
  level: AlertLevel;
  notificationEnabled: boolean;
}

// æŠ¥è­¦è®°å½•æ•°æ®æ¥å£
interface AlertRecord {
  id: string;
  type: AlertType;
  level: AlertLevel;
  message: string;
  value: number;
  threshold: number;
  timestamp: number;
  resolved: boolean;
}

@Entry
@Component
export default struct AlertManagement {
  @State alertConfigs: AlertConfig[] = [
    {
      id: '1',
      type: AlertType.SOIL_MOISTURE,
      name: 'åœŸå£¤æ¹¿åº¦',
      minThreshold: 30,
      maxThreshold: 80,
      enabled: true,
      level: AlertLevel.WARNING,
      notificationEnabled: true
    },
    {
      id: '2', 
      type: AlertType.TEMPERATURE,
      name: 'ç¯å¢ƒæ¸©åº¦',
      minThreshold: 5,
      maxThreshold: 35,
      enabled: true,
      level: AlertLevel.CRITICAL,
      notificationEnabled: true
    },
    {
      id: '3',
      type: AlertType.HUMIDITY,
      name: 'ç¯å¢ƒæ¹¿åº¦',
      minThreshold: 40,
      maxThreshold: 90,
      enabled: true,
      level: AlertLevel.WARNING,
      notificationEnabled: false
    },
    {
      id: '4',
      type: AlertType.LIGHT,
      name: 'å…‰ç…§å¼ºåº¦',
      minThreshold: 100,
      maxThreshold: 100000,
      enabled: false,
      level: AlertLevel.WARNING,
      notificationEnabled: true
    }
  ];

  @State alertRecords: AlertRecord[] = [];
  @State currentSensorData: Record<string, number> = {
    "soilMoisture": 25, // æ¨¡æ‹Ÿå½“å‰åœŸå£¤æ¹¿åº¦è¿‡ä½
    "temperature": 38,  // æ¨¡æ‹Ÿå½“å‰æ¸©åº¦è¿‡é«˜
    "humidity": 45,
    "lightIntensity": 2000
  };
  @State isMonitoring: boolean = true;

  aboutToAppear() {
    this.loadAlertConfigs();
    this.loadAlertRecords();
    this.startMonitoring();
  }

  // ã€æ•°æ®å­˜å‚¨ç‚¹ã€‘åŠ è½½æŠ¥è­¦é…ç½®
  // æ­¤å¤„åº”è¿æ¥æœ¬åœ°æ•°æ®åº“è¯»å–ç”¨æˆ·è®¾ç½®çš„æŠ¥è­¦é…ç½®å‚æ•°
  // å»ºè®®å­˜å‚¨æ ¼å¼ï¼šalert_configsè¡¨ (id, type, name, min_threshold, max_threshold, enabled, level, notification_enabled)
  loadAlertConfigs() {
    console.info('åŠ è½½æŠ¥è­¦é…ç½® - æ­¤å¤„åº”ä»æ•°æ®åº“è¯»å–ç”¨æˆ·é…ç½®çš„æŠ¥è­¦å‚æ•°');
  }

  // ã€æ•°æ®å­˜å‚¨ç‚¹ã€‘åŠ è½½å†å²æŠ¥è­¦è®°å½•
  // æ­¤å¤„åº”è¿æ¥æ•°æ®åº“è¯»å–å†å²æŠ¥è­¦è®°å½•
  // å»ºè®®å­˜å‚¨æ ¼å¼ï¼šalert_recordsè¡¨ (id, type, level, message, value, threshold, timestamp, resolved)
  loadAlertRecords() {
    console.info('åŠ è½½å†å²æŠ¥è­¦è®°å½• - æ­¤å¤„åº”ä»æ•°æ®åº“è¯»å–å†å²æŠ¥è­¦æ•°æ®');
    
    // æ¨¡æ‹Ÿå†å²æŠ¥è­¦è®°å½•
    this.alertRecords = [
      {
        id: '1',
        type: AlertType.SOIL_MOISTURE,
        level: AlertLevel.WARNING,
        message: 'åœŸå£¤æ¹¿åº¦è¿‡ä½',
        value: 25,
        threshold: 30,
        timestamp: Date.now() - 3600000,
        resolved: false
      },
      {
        id: '2',
        type: AlertType.TEMPERATURE,
        level: AlertLevel.CRITICAL,
        message: 'ç¯å¢ƒæ¸©åº¦è¿‡é«˜',
        value: 38,
        threshold: 35,
        timestamp: Date.now() - 1800000,
        resolved: false
      }
    ];
  }

  // ã€æ•°æ®è¯·æ±‚ç‚¹ã€‘è·å–å®æ—¶ä¼ æ„Ÿå™¨æ•°æ®
  // æ­¤å¤„éœ€è¦è°ƒç”¨å—å‘è®¾å¤‡APIæˆ–äº‘ç«¯APIè·å–å®æ—¶ä¼ æ„Ÿå™¨æ•°æ®
  // å»ºè®®è¯·æ±‚å‚æ•°ï¼šè®¾å¤‡IDã€æ•°æ®ç±»å‹ï¼ˆåœŸå£¤æ¹¿åº¦ã€æ¸©åº¦ã€æ¹¿åº¦ã€å…‰ç…§ç­‰ï¼‰
  // è¿”å›æ ¼å¼ï¼š{timestamp: number, soilMoisture: number, temperature: number, humidity: number, lightIntensity: number}
  async fetchRealTimeData() {
    console.info('è·å–å®æ—¶ä¼ æ„Ÿå™¨æ•°æ® - æ­¤å¤„åº”è°ƒç”¨è®¾å¤‡APIè·å–å®æ—¶æ•°æ®');
    
    // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
    this.currentSensorData = {
      "soilMoisture": Math.random() * 100,
      "temperature": 20 + Math.random() * 20,
      "humidity": 40 + Math.random() * 40,
      "lightIntensity": Math.random() * 10000
    };
  }

  // å¯åŠ¨ç›‘æ§
  startMonitoring() {
    if (this.isMonitoring) {
      setInterval(async () => {
        await this.fetchRealTimeData();
        this.checkAlerts();
      }, 5000); // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡
    }
  }

  // ã€æ•°æ®è¯·æ±‚ç‚¹ã€‘æ£€æŸ¥æ˜¯å¦è§¦å‘æŠ¥è­¦
  // ä¾èµ–çš„å®æ—¶æ•°æ®å­—æ®µï¼šåœŸå£¤æ¹¿åº¦å€¼ã€ç¯å¢ƒæ¸©åº¦å€¼ã€ç¯å¢ƒæ¹¿åº¦å€¼ã€å…‰ç…§å¼ºåº¦å€¼
  // åˆ¤æ–­é€»è¾‘ï¼šå°†å®æ—¶æ•°æ®ä¸ç”¨æˆ·é…ç½®çš„é˜ˆå€¼èŒƒå›´è¿›è¡Œæ¯”è¾ƒ
  checkAlerts() {
    console.info('æ£€æŸ¥æŠ¥è­¦æ¡ä»¶ - åŸºäºå®æ—¶æ•°æ®åˆ¤æ–­æ˜¯å¦è¶…å‡ºç”¨æˆ·è®¾å®šé˜ˆå€¼');
    
    this.alertConfigs.forEach(config => {
      if (!config.enabled) return;

      let currentValue = 0;
      let fieldName = '';

      switch (config.type) {
        case AlertType.SOIL_MOISTURE:
          currentValue = this.currentSensorData.soilMoisture;
          fieldName = 'åœŸå£¤æ¹¿åº¦';
          break;
        case AlertType.TEMPERATURE:
          currentValue = this.currentSensorData.temperature;
          fieldName = 'ç¯å¢ƒæ¸©åº¦';
          break;
        case AlertType.HUMIDITY:
          currentValue = this.currentSensorData.humidity;
          fieldName = 'ç¯å¢ƒæ¹¿åº¦';
          break;
        case AlertType.LIGHT:
          currentValue = this.currentSensorData.lightIntensity;
          fieldName = 'å…‰ç…§å¼ºåº¦';
          break;
      }

      // æ£€æŸ¥æ˜¯å¦è¶…å‡ºé˜ˆå€¼èŒƒå›´
      if (currentValue < config.minThreshold || currentValue > config.maxThreshold) {
        this.triggerAlert(config, currentValue, fieldName);
      }
    });
  }

  // è§¦å‘æŠ¥è­¦
  triggerAlert(config: AlertConfig, value: number, fieldName: string) {
    const threshold = value < config.minThreshold ? config.minThreshold : config.maxThreshold;
    const condition = value < config.minThreshold ? 'è¿‡ä½' : 'è¿‡é«˜';
    const message = `${fieldName}${condition}ï¼šå½“å‰å€¼${value.toFixed(1)}ï¼Œé˜ˆå€¼${threshold}`;

    // ã€æ•°æ®å­˜å‚¨ç‚¹ã€‘ä¿å­˜æŠ¥è­¦è®°å½•åˆ°æ•°æ®åº“
    // æ­¤å¤„åº”å°†æŠ¥è­¦è®°å½•ä¿å­˜åˆ°æ•°æ®åº“
    // å­˜å‚¨å­—æ®µï¼šæŠ¥è­¦ç±»å‹ã€çº§åˆ«ã€æ¶ˆæ¯ã€å½“å‰å€¼ã€é˜ˆå€¼ã€æ—¶é—´æˆ³ã€æ˜¯å¦å·²å¤„ç†
    const alertRecord: AlertRecord = {
      id: Date.now().toString(),
      type: config.type,
      level: config.level,
      message: message,
      value: value,
      threshold: threshold,
      timestamp: Date.now(),
      resolved: false
    };

    this.alertRecords.unshift(alertRecord);
    console.info(`ä¿å­˜æŠ¥è­¦è®°å½• - æ­¤å¤„åº”å°†æŠ¥è­¦è®°å½•å­˜å…¥æ•°æ®åº“: ${JSON.stringify(alertRecord)}`);

    // å‘é€é€šçŸ¥
    if (config.notificationEnabled) {
      this.sendNotification(message, config.level);
    }
  }

  // å‘é€ç³»ç»Ÿé€šçŸ¥
  async sendNotification(message: string, level: AlertLevel) {
    try {
      // todo ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„notificationManagerå¯¼å…¥å’ŒContentTypeç±»å‹
      await notificationManager.publish({
        id: Date.now(),
        content: {
          // contentType: 'NOTIFICATION_CONTENT_BASIC_TEXT',
          normal: {
            title: 'å†œç”°ç›‘æµ‹æŠ¥è­¦',
            text: message,
            additionalText: level === AlertLevel.CRITICAL ? 'ç´§æ€¥' : 'è­¦å‘Š'
          }
        },
        actionButtons: [
          {
            title: 'æŸ¥çœ‹è¯¦æƒ…',
            wantAgent: {
              bundleName: 'com.example.farmmonitoring',
              abilityName: 'EntryAbility'
            }
          }
        ]
      });
    } catch (error) {
      console.error('å‘é€é€šçŸ¥å¤±è´¥:', error);
    }
  }

  // ã€æ•°æ®å­˜å‚¨ç‚¹ã€‘ä¿å­˜æŠ¥è­¦é…ç½®
  // æ­¤å¤„åº”å°†ä¿®æ”¹åçš„é…ç½®ä¿å­˜åˆ°æ•°æ®åº“
  saveAlertConfig(config: AlertConfig) {
    console.info(`ä¿å­˜æŠ¥è­¦é…ç½® - æ­¤å¤„åº”å°†é…ç½®æ›´æ–°åˆ°æ•°æ®åº“: ${JSON.stringify(config)}`);
    
    const index = this.alertConfigs.findIndex(item => item.id === config.id);
    if (index >= 0) {
      this.alertConfigs[index].type = config.type;
      this.alertConfigs[index].name = config.name;
      this.alertConfigs[index].minThreshold = config.minThreshold;
      this.alertConfigs[index].maxThreshold = config.maxThreshold;
      this.alertConfigs[index].enabled = config.enabled;
      this.alertConfigs[index].level = config.level;
      this.alertConfigs[index].notificationEnabled = config.notificationEnabled;
    }
  }

  // æ ‡è®°æŠ¥è­¦ä¸ºå·²å¤„ç†
  markAlertResolved(alertId: string) {
    const index = this.alertRecords.findIndex(item => item.id === alertId);
    if (index !== -1) {
      // åˆ›å»ºæ–°æ•°ç»„ä»¥è§¦å‘çŠ¶æ€æ›´æ–°
      const newRecords = [...this.alertRecords];
      newRecords[index] = {
        id: newRecords[index].id,
        type: newRecords[index].type,
        level: newRecords[index].level,
        message: newRecords[index].message,
        value: newRecords[index].value,
        threshold: newRecords[index].threshold,
        timestamp: newRecords[index].timestamp,
        resolved: true
      };
      this.alertRecords = newRecords;

      console.info(`æ ‡è®°æŠ¥è­¦å·²å¤„ç† - æ­¤å¤„åº”æ›´æ–°æ•°æ®åº“è®°å½•: ${alertId}`);
    }
  }

  build() {
    Column({ space: 16 }) {
      // æ ‡é¢˜æ 
      Row() {
        Text('å¼‚å¸¸æé†’ç®¡ç†')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor('#333333')
      }
      .width('100%')
      .padding({ left: 16, right: 16, top: 16 })

      Scroll() {
        Column({ space: 16 }) {
          // ç›‘æ§çŠ¶æ€
          Row() {
            Text('ç›‘æ§çŠ¶æ€ï¼š')
              .fontSize(16)
              .fontColor('#666666')
            
            Toggle({ type: ToggleType.Switch, isOn: this.isMonitoring })
              .selectedColor('#007DFF')
              .onChange((isOn: boolean) => {
                this.isMonitoring = isOn;
                if (isOn) {
                  this.startMonitoring();
                }
              })
            
            Text(this.isMonitoring ? 'è¿è¡Œä¸­' : 'å·²åœæ­¢')
              .fontSize(14)
              .fontColor(this.isMonitoring ? '#52C41A' : '#FF4D4F')
              .margin({ left: 8 })
          }
          .width('100%')
          .justifyContent(FlexAlign.Start)
          .padding(16)
          .backgroundColor('#F8F9FA')
          .borderRadius(8)

          // å½“å‰æ•°æ®çŠ¶æ€
          Column({ space: 8 }) {
            Text('å½“å‰ä¼ æ„Ÿå™¨æ•°æ®')
              .fontSize(16)
              .fontWeight(FontWeight.Medium)
              .fontColor('#333333')

            Grid() {
              GridItem() {
                this.SensorDataCard('åœŸå£¤æ¹¿åº¦', this.currentSensorData.soilMoisture, '%', '#1890FF')
              }
              GridItem() {
                this.SensorDataCard('ç¯å¢ƒæ¸©åº¦', this.currentSensorData.temperature, 'Â°C', '#FF7875')
              }
              GridItem() {
                this.SensorDataCard('ç¯å¢ƒæ¹¿åº¦', this.currentSensorData.humidity, '%', '#52C41A')
              }
              GridItem() {
                this.SensorDataCard('å…‰ç…§å¼ºåº¦', this.currentSensorData.lightIntensity, 'lux', '#FFA940')
              }
            }
            .columnsTemplate('1fr 1fr')
            .rowsTemplate('1fr 1fr')
            .columnsGap(12)
            .rowsGap(12)
            .height(180)
          }
          .padding(16)
          .backgroundColor('#FFFFFF')
          .borderRadius(8)
          .shadow({ radius: 4, color: '#1F000000', offsetX: 0, offsetY: 2 })

          // æŠ¥è­¦é…ç½®
          Column({ space: 12 }) {
            Text('æŠ¥è­¦é…ç½®')
              .fontSize(16)
              .fontWeight(FontWeight.Medium)
              .fontColor('#333333')

            ForEach(this.alertConfigs, (config: AlertConfig) => {
              this.AlertConfigCard(config)
            })
          }
          .padding(16)
          .backgroundColor('#FFFFFF')
          .borderRadius(8)
          .shadow({ radius: 4, color: '#1F000000', offsetX: 0, offsetY: 2 })

          // æŠ¥è­¦è®°å½•
          Column({ space: 12 }) {
            Row() {
              Text('æŠ¥è­¦è®°å½•')
                .fontSize(16)
                .fontWeight(FontWeight.Medium)
                .fontColor('#333333')
              
              Blank()
              
              Text(`å…±${this.alertRecords.length}æ¡`)
                .fontSize(14)
                .fontColor('#666666')
            }
            .width('100%')

            if (this.alertRecords.length > 0) {
              ForEach(this.alertRecords, (record: AlertRecord) => {
                this.AlertRecordCard(record)
              })
            } else {
              Text('æš‚æ— æŠ¥è­¦è®°å½•')
                .fontSize(14)
                .fontColor('#999999')
                .textAlign(TextAlign.Center)
                .padding(32)
            }
          }
          .padding(16)
          .backgroundColor('#FFFFFF')
          .borderRadius(8)
          .shadow({ radius: 4, color: '#1F000000', offsetX: 0, offsetY: 2 })
        }
      }
      .layoutWeight(1)
      .padding(16)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
  }

  @Builder SensorDataCard(title: string, value: number, unit: string, color: string) {
    Column({ space: 4 }) {
      Text(title)
        .fontSize(12)
        .fontColor('#666666')
      
      Text(`${value.toFixed(1)}${unit}`)
        .fontSize(18)
        .fontWeight(FontWeight.Bold)
        .fontColor(color)
    }
    .width('100%')
    .height('100%')
    .justifyContent(FlexAlign.Center)
    .backgroundColor('#F8F9FA')
    .borderRadius(6)
    .padding(8)
  }

  @Builder AlertConfigCard(config: AlertConfig) {
    Column({ space: 8 }) {
      Row() {
        Text(config.name)
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
          .fontColor('#333333')
        
        Blank()
        
        Toggle({ type: ToggleType.Switch, isOn: config.enabled })
          .selectedColor('#007DFF')
          .onChange((isOn: boolean) => {
            config.enabled = isOn;
            this.saveAlertConfig(config);
          })
      }
      .width('100%')

      Row() {
        Text('é˜ˆå€¼èŒƒå›´ï¼š')
          .fontSize(12)
          .fontColor('#666666')
        
        TextInput({ text: config.minThreshold.toString() })
          .width(60)
          .height(28)
          .fontSize(12)
          .onChange((value: string) => {
            config.minThreshold = parseFloat(value) || 0;
            this.saveAlertConfig(config);
          })
        
        Text(' - ')
          .fontSize(12)
          .fontColor('#666666')
          .margin({ left: 4, right: 4 })
        
        TextInput({ text: config.maxThreshold.toString() })
          .width(60)
          .height(28)
          .fontSize(12)
          .onChange((value: string) => {
            config.maxThreshold = parseFloat(value) || 0;
            this.saveAlertConfig(config);
          })
        
        Blank()
        
        Text(config.level === AlertLevel.CRITICAL ? 'ç´§æ€¥' : 'è­¦å‘Š')
          .fontSize(12)
          .fontColor(config.level === AlertLevel.CRITICAL ? '#FF4D4F' : '#FA8C16')
          .padding({ left: 6, right: 6, top: 2, bottom: 2 })
          .backgroundColor(config.level === AlertLevel.CRITICAL ? '#FFF1F0' : '#FFF7E6')
          .borderRadius(4)
      }
      .width('100%')
      .alignItems(VerticalAlign.Center)

      Row() {
        Toggle({ type: ToggleType.Checkbox, isOn: config.notificationEnabled })
          .selectedColor('#007DFF')
          .onChange((isOn: boolean) => {
            config.notificationEnabled = isOn;
            this.saveAlertConfig(config);
          })
        
        Text('å¯ç”¨é€šçŸ¥æ¨é€')
          .fontSize(12)
          .fontColor('#666666')
          .margin({ left: 6 })
      }
      .width('100%')
      .alignItems(VerticalAlign.Center)
    }
    .width('100%')
    .padding(12)
    .backgroundColor('#F8F9FA')
    .borderRadius(6)
  }

  @Builder AlertRecordCard(record: AlertRecord) {
    Column({ space: 12 }) {
      // é¡¶éƒ¨ä¿¡æ¯è¡Œ
      Row() {
        Column({ space: 4 }) {
          Text(record.message)
            .fontSize(14)
            .fontWeight(FontWeight.Medium)
            .fontColor('#333333')
            .maxLines(2)
            .textOverflow({ overflow: TextOverflow.Ellipsis })

          Row({ space: 8 }) {
            Text(new Date(record.timestamp).toLocaleString())
              .fontSize(12)
              .fontColor('#999999')

            Text(`å½“å‰å€¼ï¼š${record.value.toFixed(1)}`)
              .fontSize(12)
              .fontColor('#666666')
          }
        }
        .layoutWeight(1)
        .alignItems(HorizontalAlign.Start)

        // çº§åˆ«æ ‡ç­¾
        Text(record.level === AlertLevel.CRITICAL ? 'ğŸ”´ ç´§æ€¥' : 'ğŸŸ¡ è­¦å‘Š')
          .fontSize(12)
          .fontColor('#FFFFFF')
          .padding({ left: 10, right: 10, top: 4, bottom: 4 })
          .backgroundColor(record.level === AlertLevel.CRITICAL ? '#FF4D4F' : '#FA8C16')
          .borderRadius(12)
      }
      .width('100%')
      .alignItems(VerticalAlign.Top)

      // åˆ†éš”çº¿
      Divider()
        .color('#F0F0F0')

      // åº•éƒ¨æ“ä½œåŒº
      Row() {
        // çŠ¶æ€æŒ‡ç¤º
        Row({ space: 6 }) {
          Circle({ width: 8, height: 8 })
            .fill(record.resolved ? '#52C41A' : '#FF4D4F')

          Text(record.resolved ? 'å·²å¤„ç†' : 'å¾…å¤„ç†')
            .fontSize(13)
            .fontColor(record.resolved ? '#52C41A' : '#FF4D4F')
            .fontWeight(FontWeight.Medium)
        }

        Blank()

        // æ“ä½œæŒ‰é’®
        if (!record.resolved) {
          Button() {
            Row({ space: 6 }) {
              Text('âœ“')
                .fontSize(14)
                .fontColor('#FFFFFF')
              Text('æ ‡è®°å·²å¤„ç†')
                .fontSize(13)
                .fontColor('#FFFFFF')
            }
          }
          .backgroundColor('#1890FF')
          .borderRadius(20)
          .padding({ left: 16, right: 16, top: 8, bottom: 8 })
          .shadow({
            radius: 6,
            color: '#1890FF40',
            offsetX: 0,
            offsetY: 2
          })
          .onClick(() => {
            this.markAlertResolved(record.id);
          })
        } else {
          Row({ space: 6 }) {
            Text('âœ“')
              .fontSize(14)
              .fontColor('#52C41A')
            Text('å¤„ç†å®Œæˆ')
              .fontSize(13)
              .fontColor('#52C41A')
              .fontWeight(FontWeight.Medium)
          }
          .padding({ left: 16, right: 16, top: 8, bottom: 8 })
          .backgroundColor('#F6FFED')
          .borderRadius(20)
          .border({ width: 1, color: '#B7EB8F' })
        }
      }
      .width('100%')
      .alignItems(VerticalAlign.Center)
    }
    .width('100%')
    .padding(16)
    .backgroundColor('#FFFFFF')
    .borderRadius(12)
    .border({
      width: 2,
      color: record.resolved ? '#F0F0F0' : (record.level === AlertLevel.CRITICAL ? '#FFE7E7' : '#FFF7E6')
    })
    .shadow({
      radius: record.resolved ? 4 : 8,
      color: record.resolved ? '#00000008' : (record.level === AlertLevel.CRITICAL ? '#FF4D4F20' : '#FA8C1620'),
      offsetX: 0,
      offsetY: 2
    })
  }
}